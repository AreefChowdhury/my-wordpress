# Travis CI Configuration File
sudo: false
dist: trusty
language: php
cache:
  directories:
    - $HOME/.npm
    - vendor
    - $HOME/.composer/cache

# Build matrix options
matrix:
  include:
    - php: 5.5
    - php: 5.2
      dist: precise
  fast_finish: true

before_script:
    - |
      stable='^[0-9\.]+$';
      if [[ "$TRAVIS_PHP_VERSION" =~ $stable ]]; then
          phpenv config-rm xdebug.ini
      fi
    - mysql -e "CREATE DATABASE wordpress_tests;" -uroot
    - cp wp-tests-config-sample.php wp-tests-config.php
    - sed -i "s/youremptytestdbnamehere/wordpress_tests/" wp-tests-config.php
    - sed -i "s/yourusernamehere/travis/" wp-tests-config.php
    - sed -i "s/yourpasswordhere//" wp-tests-config.php
    - svn checkout https://plugins.svn.wordpress.org/wordpress-importer/trunk tests/phpunit/data/plugins/wordpress-importer
    - npm install -g grunt-cli
    - npm install
    - php --version

script: grunt travis 
