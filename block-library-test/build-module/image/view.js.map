{"version":3,"names":["store","getContext","getElement","focusableSelectors","scrollCallback","isTouching","lastTouchTime","handleScroll","ctx","Date","now","window","scrollTo","scrollLeftReset","scrollTopReset","state","actions","callbacks","windowWidth","innerWidth","windowHeight","innerHeight","roleAttribute","lightboxEnabled","ariaModal","dialogLabel","lightboxObjectFit","initialized","enlargedImgSrc","imageUploadedSrc","showLightbox","event","imageLoaded","lastFocusedElement","document","activeElement","scrollDelta","pointerType","setStyles","imageRef","pageYOffset","documentElement","scrollTop","pageXOffset","scrollLeft","bind","addEventListener","hideLightbox","hideAnimationEnabled","setTimeout","removeEventListener","lightboxTriggerRef","focus","preventScroll","handleKeydown","key","keyCode","shiftKey","firstFocusableElement","preventDefault","lastFocusableElement","handleLoad","ref","imageCurrentSrc","currentSrc","setButtonStyles","handleTouchStart","handleTouchMove","handleTouchEnd","initOriginImage","complete","initTriggerButton","initLightbox","focusableElements","querySelectorAll","length","naturalWidth","naturalHeight","offsetWidth","offsetHeight","figure","parentElement","figureWidth","clientWidth","figureHeight","clientHeight","caption","querySelector","captionComputedStyle","getComputedStyle","includes","position","parseFloat","marginTop","marginBottom","buttonOffsetTop","buttonOffsetRight","scaleAttr","naturalRatio","offsetRatio","referenceHeight","imageButtonTop","imageButtonRight","referenceWidth","setStylesOnResize","debounce","originalWidth","originalHeight","x","screenPosX","y","screenPosY","getBoundingClientRect","originalRatio","heightWithoutSpace","widthWithoutSpace","imgMaxWidth","targetWidth","imgMaxHeight","targetHeight","imgRatio","containerMaxWidth","containerMaxHeight","containerWidth","containerHeight","toFixed","reducedHeight","reducedWidth","horizontalPadding","verticalPadding","targetMaxWidth","Math","min","targetMaxHeight","targetContainerRatio","containerScale","lightboxImgWidth","lightboxImgHeight","styleTag","getElementById","createElement","id","head","appendChild","innerHTML","func","wait","timeout","later","clearTimeout"],"sources":["@wordpress/block-library/src/image/view.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst focusableSelectors = [\n\t'a[href]',\n\t'area[href]',\n\t'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\n\t'select:not([disabled]):not([aria-hidden])',\n\t'textarea:not([disabled]):not([aria-hidden])',\n\t'button:not([disabled]):not([aria-hidden])',\n\t'iframe',\n\t'object',\n\t'embed',\n\t'[contenteditable]',\n\t'[tabindex]:not([tabindex^=\"-\"])',\n];\n\n/**\n * Stores a context-bound scroll handler.\n *\n * This callback could be defined inline inside of the store\n * object but it's created externally to avoid confusion about\n * how its logic is called. This logic is not referenced directly\n * by the directives in the markup because the scroll event we\n * need to listen to is triggered on the window; so by defining it\n * outside of the store, we signal that the behavior here is different.\n * If we find a compelling reason to move it to the store, feel free.\n *\n * @type {Function}\n */\nlet scrollCallback;\n\n/**\n * Tracks whether user is touching screen; used to\n * differentiate behavior for touch and mouse input.\n *\n * @type {boolean}\n */\nlet isTouching = false;\n\n/**\n * Tracks the last time the screen was touched; used to\n * differentiate behavior for touch and mouse input.\n *\n * @type {number}\n */\nlet lastTouchTime = 0;\n\n/**\n * Lightbox page-scroll handler: prevents scrolling.\n *\n * This handler is added to prevent scrolling behaviors that\n * trigger content shift while the lightbox is open.\n *\n * It would be better to accomplish this through CSS alone, but\n * using overflow: hidden is currently the only way to do so, and\n * that causes the layout to shift and prevents the zoom animation\n * from working in some cases because we're unable to account for\n * the layout shift when doing the animation calculations. Instead,\n * here we use JavaScript to prevent and reset the scrolling\n * behavior. In the future, we may be able to use CSS or overflow: hidden\n * instead to not rely on JavaScript, but this seems to be the best approach\n * for now that provides the best visual experience.\n *\n * @param {Object} ctx Context object with the `core/image` namespace.\n */\nfunction handleScroll( ctx ) {\n\t// We can't override the scroll behavior on mobile devices\n\t// because doing so breaks the pinch to zoom functionality, and we\n\t// want to allow users to zoom in further on the high-res image.\n\tif ( ! isTouching && Date.now() - lastTouchTime > 450 ) {\n\t\t// We are unable to use event.preventDefault() to prevent scrolling\n\t\t// because the scroll event can't be canceled, so we reset the position instead.\n\t\twindow.scrollTo( ctx.scrollLeftReset, ctx.scrollTopReset );\n\t}\n}\n\nconst { state, actions, callbacks } = store( 'core/image', {\n\tstate: {\n\t\twindowWidth: window.innerWidth,\n\t\twindowHeight: window.innerHeight,\n\t\tget roleAttribute() {\n\t\t\tconst ctx = getContext();\n\t\t\treturn ctx.lightboxEnabled ? 'dialog' : null;\n\t\t},\n\t\tget ariaModal() {\n\t\t\tconst ctx = getContext();\n\t\t\treturn ctx.lightboxEnabled ? 'true' : null;\n\t\t},\n\t\tget dialogLabel() {\n\t\t\tconst ctx = getContext();\n\t\t\treturn ctx.lightboxEnabled ? ctx.dialogLabel : null;\n\t\t},\n\t\tget lightboxObjectFit() {\n\t\t\tconst ctx = getContext();\n\t\t\tif ( ctx.initialized ) {\n\t\t\t\treturn 'cover';\n\t\t\t}\n\t\t},\n\t\tget enlargedImgSrc() {\n\t\t\tconst ctx = getContext();\n\t\t\treturn ctx.initialized\n\t\t\t\t? ctx.imageUploadedSrc\n\t\t\t\t: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\t\t},\n\t},\n\tactions: {\n\t\tshowLightbox( event ) {\n\t\t\tconst ctx = getContext();\n\t\t\t// We can't initialize the lightbox until the reference\n\t\t\t// image is loaded, otherwise the UX is broken.\n\t\t\tif ( ! ctx.imageLoaded ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tctx.initialized = true;\n\t\t\tctx.lastFocusedElement = window.document.activeElement;\n\t\t\tctx.scrollDelta = 0;\n\t\t\tctx.pointerType = event.pointerType;\n\n\t\t\tctx.lightboxEnabled = true;\n\t\t\tsetStyles( ctx, ctx.imageRef );\n\n\t\t\tctx.scrollTopReset =\n\t\t\t\twindow.pageYOffset || document.documentElement.scrollTop;\n\n\t\t\t// In most cases, this value will be 0, but this is included\n\t\t\t// in case a user has created a page with horizontal scrolling.\n\t\t\tctx.scrollLeftReset =\n\t\t\t\twindow.pageXOffset || document.documentElement.scrollLeft;\n\n\t\t\t// We define and bind the scroll callback here so\n\t\t\t// that we can pass the context and as an argument.\n\t\t\t// We may be able to change this in the future if we\n\t\t\t// define the scroll callback in the store instead, but\n\t\t\t// this approach seems to tbe clearest for now.\n\t\t\tscrollCallback = handleScroll.bind( null, ctx );\n\n\t\t\t// We need to add a scroll event listener to the window\n\t\t\t// here because we are unable to otherwise access it via\n\t\t\t// the Interactivity API directives. If we add a native way\n\t\t\t// to access the window, we can remove this.\n\t\t\twindow.addEventListener( 'scroll', scrollCallback, false );\n\t\t},\n\t\thideLightbox() {\n\t\t\tconst ctx = getContext();\n\t\t\tctx.hideAnimationEnabled = true;\n\t\t\tif ( ctx.lightboxEnabled ) {\n\t\t\t\t// We want to wait until the close animation is completed\n\t\t\t\t// before allowing a user to scroll again. The duration of this\n\t\t\t\t// animation is defined in the styles.scss and depends on if the\n\t\t\t\t// animation is 'zoom' or 'fade', but in any case we should wait\n\t\t\t\t// a few milliseconds longer than the duration, otherwise a user\n\t\t\t\t// may scroll too soon and cause the animation to look sloppy.\n\t\t\t\tsetTimeout( function () {\n\t\t\t\t\twindow.removeEventListener( 'scroll', scrollCallback );\n\t\t\t\t\t// If we don't delay before changing the focus,\n\t\t\t\t\t// the focus ring will appear on Firefox before\n\t\t\t\t\t// the image has finished animating, which looks broken.\n\t\t\t\t\tctx.lightboxTriggerRef.focus( {\n\t\t\t\t\t\tpreventScroll: true,\n\t\t\t\t\t} );\n\t\t\t\t}, 450 );\n\n\t\t\t\tctx.lightboxEnabled = false;\n\t\t\t}\n\t\t},\n\t\thandleKeydown( event ) {\n\t\t\tconst ctx = getContext();\n\t\t\tif ( ctx.lightboxEnabled ) {\n\t\t\t\tif ( event.key === 'Tab' || event.keyCode === 9 ) {\n\t\t\t\t\t// If shift + tab it change the direction\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.shiftKey &&\n\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\tctx.firstFocusableElement\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tctx.lastFocusableElement.focus();\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t! event.shiftKey &&\n\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\tctx.lastFocusableElement\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tctx.firstFocusableElement.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( event.key === 'Escape' || event.keyCode === 27 ) {\n\t\t\t\t\tactions.hideLightbox( event );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// This is fired just by lazily loaded\n\t\t// images on the page, not all images.\n\t\thandleLoad() {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tctx.imageLoaded = true;\n\t\t\tctx.imageCurrentSrc = ref.currentSrc;\n\t\t\tcallbacks.setButtonStyles();\n\t\t},\n\t\thandleTouchStart() {\n\t\t\tisTouching = true;\n\t\t},\n\t\thandleTouchMove( event ) {\n\t\t\tconst ctx = getContext();\n\t\t\t// On mobile devices, we want to prevent triggering the\n\t\t\t// scroll event because otherwise the page jumps around as\n\t\t\t// we reset the scroll position. This also means that closing\n\t\t\t// the lightbox requires that a user perform a simple tap. This\n\t\t\t// may be changed in the future if we find a better alternative\n\t\t\t// to override or reset the scroll position during swipe actions.\n\t\t\tif ( ctx.lightboxEnabled ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\thandleTouchEnd() {\n\t\t\t// We need to wait a few milliseconds before resetting\n\t\t\t// to ensure that pinch to zoom works consistently\n\t\t\t// on mobile devices when the lightbox is open.\n\t\t\tlastTouchTime = Date.now();\n\t\t\tisTouching = false;\n\t\t},\n\t},\n\tcallbacks: {\n\t\tinitOriginImage() {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tctx.imageRef = ref;\n\t\t\tif ( ref.complete ) {\n\t\t\t\tctx.imageLoaded = true;\n\t\t\t\tctx.imageCurrentSrc = ref.currentSrc;\n\t\t\t}\n\t\t},\n\t\tinitTriggerButton() {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tctx.lightboxTriggerRef = ref;\n\t\t},\n\t\tinitLightbox() {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tif ( ctx.lightboxEnabled ) {\n\t\t\t\tconst focusableElements =\n\t\t\t\t\tref.querySelectorAll( focusableSelectors );\n\t\t\t\tctx.firstFocusableElement = focusableElements[ 0 ];\n\t\t\t\tctx.lastFocusableElement =\n\t\t\t\t\tfocusableElements[ focusableElements.length - 1 ];\n\n\t\t\t\t// Move focus to the dialog when opening it.\n\t\t\t\tref.focus();\n\t\t\t}\n\t\t},\n\t\tsetButtonStyles() {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { naturalWidth, naturalHeight, offsetWidth, offsetHeight } =\n\t\t\t\tref;\n\n\t\t\t// If the image isn't loaded yet, we can't\n\t\t\t// calculate where the button should be.\n\t\t\tif ( naturalWidth === 0 || naturalHeight === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst figure = ref.parentElement;\n\t\t\tconst figureWidth = ref.parentElement.clientWidth;\n\n\t\t\t// We need special handling for the height because\n\t\t\t// a caption will cause the figure to be taller than\n\t\t\t// the image, which means we need to account for that\n\t\t\t// when calculating the placement of the button in the\n\t\t\t// top right corner of the image.\n\t\t\tlet figureHeight = ref.parentElement.clientHeight;\n\t\t\tconst caption = figure.querySelector( 'figcaption' );\n\t\t\tif ( caption ) {\n\t\t\t\tconst captionComputedStyle = window.getComputedStyle( caption );\n\t\t\t\tif (\n\t\t\t\t\t! [ 'absolute', 'fixed' ].includes(\n\t\t\t\t\t\tcaptionComputedStyle.position\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfigureHeight =\n\t\t\t\t\t\tfigureHeight -\n\t\t\t\t\t\tcaption.offsetHeight -\n\t\t\t\t\t\tparseFloat( captionComputedStyle.marginTop ) -\n\t\t\t\t\t\tparseFloat( captionComputedStyle.marginBottom );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst buttonOffsetTop = figureHeight - offsetHeight;\n\t\t\tconst buttonOffsetRight = figureWidth - offsetWidth;\n\n\t\t\tconst ctx = getContext();\n\n\t\t\t// In the case of an image with object-fit: contain, the\n\t\t\t// size of the <img> element can be larger than the image itself,\n\t\t\t// so we need to calculate where to place the button.\n\t\t\tif ( ctx.scaleAttr === 'contain' ) {\n\t\t\t\t// Natural ratio of the image.\n\t\t\t\tconst naturalRatio = naturalWidth / naturalHeight;\n\t\t\t\t// Offset ratio of the image.\n\t\t\t\tconst offsetRatio = offsetWidth / offsetHeight;\n\n\t\t\t\tif ( naturalRatio >= offsetRatio ) {\n\t\t\t\t\t// If it reaches the width first, keep\n\t\t\t\t\t// the width and compute the height.\n\t\t\t\t\tconst referenceHeight = offsetWidth / naturalRatio;\n\t\t\t\t\tctx.imageButtonTop =\n\t\t\t\t\t\t( offsetHeight - referenceHeight ) / 2 +\n\t\t\t\t\t\tbuttonOffsetTop +\n\t\t\t\t\t\t16;\n\t\t\t\t\tctx.imageButtonRight = buttonOffsetRight + 16;\n\t\t\t\t} else {\n\t\t\t\t\t// If it reaches the height first, keep\n\t\t\t\t\t// the height and compute the width.\n\t\t\t\t\tconst referenceWidth = offsetHeight * naturalRatio;\n\t\t\t\t\tctx.imageButtonTop = buttonOffsetTop + 16;\n\t\t\t\t\tctx.imageButtonRight =\n\t\t\t\t\t\t( offsetWidth - referenceWidth ) / 2 +\n\t\t\t\t\t\tbuttonOffsetRight +\n\t\t\t\t\t\t16;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tctx.imageButtonTop = buttonOffsetTop + 16;\n\t\t\t\tctx.imageButtonRight = buttonOffsetRight + 16;\n\t\t\t}\n\t\t},\n\t\tsetStylesOnResize() {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tif (\n\t\t\t\tctx.lightboxEnabled &&\n\t\t\t\t( state.windowWidth || state.windowHeight )\n\t\t\t) {\n\t\t\t\tsetStyles( ctx, ref );\n\t\t\t}\n\t\t},\n\t},\n} );\n\nwindow.addEventListener(\n\t'resize',\n\tdebounce( () => {\n\t\tstate.windowWidth = window.innerWidth;\n\t\tstate.windowHeight = window.innerHeight;\n\t} )\n);\n\n/**\n * Computes styles for the lightbox and adds them to the document.\n *\n * @function\n * @param {Object} ctx - Context for the `core/image` namespace.\n * @param {Object} ref - The element reference.\n */\nfunction setStyles( ctx, ref ) {\n\t// The reference img element lies adjacent\n\t// to the event target button in the DOM.\n\tlet {\n\t\tnaturalWidth,\n\t\tnaturalHeight,\n\t\toffsetWidth: originalWidth,\n\t\toffsetHeight: originalHeight,\n\t} = ref;\n\tlet { x: screenPosX, y: screenPosY } = ref.getBoundingClientRect();\n\n\t// Natural ratio of the image clicked to open the lightbox.\n\tconst naturalRatio = naturalWidth / naturalHeight;\n\t// Original ratio of the image clicked to open the lightbox.\n\tlet originalRatio = originalWidth / originalHeight;\n\n\t// If it has object-fit: contain, recalculate the original sizes\n\t// and the screen position without the blank spaces.\n\tif ( ctx.scaleAttr === 'contain' ) {\n\t\tif ( naturalRatio > originalRatio ) {\n\t\t\tconst heightWithoutSpace = originalWidth / naturalRatio;\n\t\t\t// Recalculate screen position without the top space.\n\t\t\tscreenPosY += ( originalHeight - heightWithoutSpace ) / 2;\n\t\t\toriginalHeight = heightWithoutSpace;\n\t\t} else {\n\t\t\tconst widthWithoutSpace = originalHeight * naturalRatio;\n\t\t\t// Recalculate screen position without the left space.\n\t\t\tscreenPosX += ( originalWidth - widthWithoutSpace ) / 2;\n\t\t\toriginalWidth = widthWithoutSpace;\n\t\t}\n\t}\n\toriginalRatio = originalWidth / originalHeight;\n\n\t// Typically, we use the image's full-sized dimensions. If those\n\t// dimensions have not been set (i.e. an external image with only one size),\n\t// the image's dimensions in the lightbox are the same\n\t// as those of the image in the content.\n\tlet imgMaxWidth = parseFloat(\n\t\tctx.targetWidth !== 'none' ? ctx.targetWidth : naturalWidth\n\t);\n\tlet imgMaxHeight = parseFloat(\n\t\tctx.targetHeight !== 'none' ? ctx.targetHeight : naturalHeight\n\t);\n\n\t// Ratio of the biggest image stored in the database.\n\tlet imgRatio = imgMaxWidth / imgMaxHeight;\n\tlet containerMaxWidth = imgMaxWidth;\n\tlet containerMaxHeight = imgMaxHeight;\n\tlet containerWidth = imgMaxWidth;\n\tlet containerHeight = imgMaxHeight;\n\t// Check if the target image has a different ratio than the original one (thumbnail).\n\t// Recalculate the width and height.\n\tif ( naturalRatio.toFixed( 2 ) !== imgRatio.toFixed( 2 ) ) {\n\t\tif ( naturalRatio > imgRatio ) {\n\t\t\t// If the width is reached before the height, we keep the maxWidth\n\t\t\t// and recalculate the height.\n\t\t\t// Unless the difference between the maxHeight and the reducedHeight\n\t\t\t// is higher than the maxWidth, where we keep the reducedHeight and\n\t\t\t// recalculate the width.\n\t\t\tconst reducedHeight = imgMaxWidth / naturalRatio;\n\t\t\tif ( imgMaxHeight - reducedHeight > imgMaxWidth ) {\n\t\t\t\timgMaxHeight = reducedHeight;\n\t\t\t\timgMaxWidth = reducedHeight * naturalRatio;\n\t\t\t} else {\n\t\t\t\timgMaxHeight = imgMaxWidth / naturalRatio;\n\t\t\t}\n\t\t} else {\n\t\t\t// If the height is reached before the width, we keep the maxHeight\n\t\t\t// and recalculate the width.\n\t\t\t// Unless the difference between the maxWidth and the reducedWidth\n\t\t\t// is higher than the maxHeight, where we keep the reducedWidth and\n\t\t\t// recalculate the height.\n\t\t\tconst reducedWidth = imgMaxHeight * naturalRatio;\n\t\t\tif ( imgMaxWidth - reducedWidth > imgMaxHeight ) {\n\t\t\t\timgMaxWidth = reducedWidth;\n\t\t\t\timgMaxHeight = reducedWidth / naturalRatio;\n\t\t\t} else {\n\t\t\t\timgMaxWidth = imgMaxHeight * naturalRatio;\n\t\t\t}\n\t\t}\n\t\tcontainerWidth = imgMaxWidth;\n\t\tcontainerHeight = imgMaxHeight;\n\t\timgRatio = imgMaxWidth / imgMaxHeight;\n\n\t\t// Calculate the max size of the container.\n\t\tif ( originalRatio > imgRatio ) {\n\t\t\tcontainerMaxWidth = imgMaxWidth;\n\t\t\tcontainerMaxHeight = containerMaxWidth / originalRatio;\n\t\t} else {\n\t\t\tcontainerMaxHeight = imgMaxHeight;\n\t\t\tcontainerMaxWidth = containerMaxHeight * originalRatio;\n\t\t}\n\t}\n\n\t// If the image has been pixelated on purpose, keep that size.\n\tif ( originalWidth > containerWidth || originalHeight > containerHeight ) {\n\t\tcontainerWidth = originalWidth;\n\t\tcontainerHeight = originalHeight;\n\t}\n\n\t// Calculate the final lightbox image size and the\n\t// scale factor. MaxWidth is either the window container\n\t// (accounting for padding) or the image resolution.\n\tlet horizontalPadding = 0;\n\tif ( window.innerWidth > 480 ) {\n\t\thorizontalPadding = 80;\n\t} else if ( window.innerWidth > 1920 ) {\n\t\thorizontalPadding = 160;\n\t}\n\tconst verticalPadding = 80;\n\n\tconst targetMaxWidth = Math.min(\n\t\twindow.innerWidth - horizontalPadding,\n\t\tcontainerWidth\n\t);\n\tconst targetMaxHeight = Math.min(\n\t\twindow.innerHeight - verticalPadding,\n\t\tcontainerHeight\n\t);\n\tconst targetContainerRatio = targetMaxWidth / targetMaxHeight;\n\n\tif ( originalRatio > targetContainerRatio ) {\n\t\t// If targetMaxWidth is reached before targetMaxHeight\n\t\tcontainerWidth = targetMaxWidth;\n\t\tcontainerHeight = containerWidth / originalRatio;\n\t} else {\n\t\t// If targetMaxHeight is reached before targetMaxWidth\n\t\tcontainerHeight = targetMaxHeight;\n\t\tcontainerWidth = containerHeight * originalRatio;\n\t}\n\n\tconst containerScale = originalWidth / containerWidth;\n\tconst lightboxImgWidth =\n\t\timgMaxWidth * ( containerWidth / containerMaxWidth );\n\tconst lightboxImgHeight =\n\t\timgMaxHeight * ( containerHeight / containerMaxHeight );\n\n\t// Add the CSS variables needed.\n\tlet styleTag = document.getElementById( 'wp-lightbox-styles' );\n\tif ( ! styleTag ) {\n\t\tstyleTag = document.createElement( 'style' );\n\t\tstyleTag.id = 'wp-lightbox-styles';\n\t\tdocument.head.appendChild( styleTag );\n\t}\n\n\t// As of this writing, using the calculations above will render the lightbox\n\t// with a small, erroneous whitespace on the left side of the image in iOS Safari,\n\t// perhaps due to an inconsistency in how browsers handle absolute positioning and CSS\n\t// transformation. In any case, adding 1 pixel to the container width and height solves\n\t// the problem, though this can be removed if the issue is fixed in the future.\n\tstyleTag.innerHTML = `\n\t\t:root {\n\t\t\t--wp--lightbox-initial-top-position: ${ screenPosY }px;\n\t\t\t--wp--lightbox-initial-left-position: ${ screenPosX }px;\n\t\t\t--wp--lightbox-container-width: ${ containerWidth + 1 }px;\n\t\t\t--wp--lightbox-container-height: ${ containerHeight + 1 }px;\n\t\t\t--wp--lightbox-image-width: ${ lightboxImgWidth }px;\n\t\t\t--wp--lightbox-image-height: ${ lightboxImgHeight }px;\n\t\t\t--wp--lightbox-scale: ${ containerScale };\n\t\t\t--wp--lightbox-scrollbar-width: ${\n\t\t\t\twindow.innerWidth - document.documentElement.clientWidth\n\t\t\t}px;\n\t\t}\n\t`;\n}\n\n/**\n * Debounces a function call.\n *\n * @function\n * @param {Function} func - A function to be called\n * @param {number}   wait - The time to wait before calling the function\n */\nfunction debounce( func, wait = 50 ) {\n\tlet timeout;\n\treturn () => {\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc();\n\t\t};\n\t\tclearTimeout( timeout );\n\t\ttimeout = setTimeout( later, wait );\n\t};\n}\n"],"mappings":"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"}