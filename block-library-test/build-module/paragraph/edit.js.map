{"version":3,"names":["classnames","__","_x","isRTL","ToolbarButton","ToggleControl","__experimentalToolsPanelItem","ToolsPanelItem","AlignmentControl","BlockControls","InspectorControls","RichText","useBlockProps","useSettings","useBlockEditingMode","createBlock","formatLtr","useOnEnter","name","ParagraphRTLControl","direction","setDirection","createElement","icon","title","isActive","onClick","undefined","hasDropCapDisabled","align","DropCapControl","clientId","attributes","setAttributes","isDropCapFeatureEnabled","dropCap","helpText","hasValue","label","onDeselect","resetAllFilter","panelId","__nextHasNoMarginBottom","checked","onChange","help","disabled","ParagraphBlock","mergeBlocks","onReplace","onRemove","content","placeholder","blockProps","ref","className","style","blockEditingMode","Fragment","group","value","newAlign","newDirection","identifier","tagName","newContent","onSplit","isOriginal","newAttributes","block","onMerge","isEmpty","__unstableEmbedURLOnPaste","__unstableAllowPrefixTransformations"],"sources":["@wordpress/block-library/src/paragraph/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, isRTL } from '@wordpress/i18n';\nimport {\n\tToolbarButton,\n\tToggleControl,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\tuseBlockProps,\n\tuseSettings,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport { formatLtr } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { useOnEnter } from './use-enter';\n\nconst name = 'core/paragraph';\n\nfunction ParagraphRTLControl( { direction, setDirection } ) {\n\treturn (\n\t\tisRTL() && (\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ formatLtr }\n\t\t\t\ttitle={ _x( 'Left to right', 'editor button' ) }\n\t\t\t\tisActive={ direction === 'ltr' }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetDirection( direction === 'ltr' ? undefined : 'ltr' );\n\t\t\t\t} }\n\t\t\t/>\n\t\t)\n\t);\n}\n\nfunction hasDropCapDisabled( align ) {\n\treturn align === ( isRTL() ? 'left' : 'right' ) || align === 'center';\n}\n\nfunction DropCapControl( { clientId, attributes, setAttributes } ) {\n\t// Please do not add a useSelect call to the paragraph block unconditionally.\n\t// Every useSelect added to a (frequently used) block will degrade load\n\t// and type performance. By moving it within InspectorControls, the subscription is\n\t// now only added for the selected block(s).\n\tconst [ isDropCapFeatureEnabled ] = useSettings( 'typography.dropCap' );\n\n\tif ( ! isDropCapFeatureEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst { align, dropCap } = attributes;\n\n\tlet helpText;\n\tif ( hasDropCapDisabled( align ) ) {\n\t\thelpText = __( 'Not available for aligned text.' );\n\t} else if ( dropCap ) {\n\t\thelpText = __( 'Showing large initial letter.' );\n\t} else {\n\t\thelpText = __( 'Toggle to show a large initial letter.' );\n\t}\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={ () => !! dropCap }\n\t\t\tlabel={ __( 'Drop cap' ) }\n\t\t\tonDeselect={ () => setAttributes( { dropCap: undefined } ) }\n\t\t\tresetAllFilter={ () => ( { dropCap: undefined } ) }\n\t\t\tpanelId={ clientId }\n\t\t>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Drop cap' ) }\n\t\t\t\tchecked={ !! dropCap }\n\t\t\t\tonChange={ () => setAttributes( { dropCap: ! dropCap } ) }\n\t\t\t\thelp={ helpText }\n\t\t\t\tdisabled={ hasDropCapDisabled( align ) ? true : false }\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nfunction ParagraphBlock( {\n\tattributes,\n\tmergeBlocks,\n\tonReplace,\n\tonRemove,\n\tsetAttributes,\n\tclientId,\n} ) {\n\tconst { align, content, direction, dropCap, placeholder } = attributes;\n\tconst blockProps = useBlockProps( {\n\t\tref: useOnEnter( { clientId, content } ),\n\t\tclassName: classnames( {\n\t\t\t'has-drop-cap': hasDropCapDisabled( align ) ? false : dropCap,\n\t\t\t[ `has-text-align-${ align }` ]: align,\n\t\t} ),\n\t\tstyle: { direction },\n\t} );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\treturn (\n\t\t<>\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<BlockControls group=\"block\">\n\t\t\t\t\t<AlignmentControl\n\t\t\t\t\t\tvalue={ align }\n\t\t\t\t\t\tonChange={ ( newAlign ) =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\talign: newAlign,\n\t\t\t\t\t\t\t\tdropCap: hasDropCapDisabled( newAlign )\n\t\t\t\t\t\t\t\t\t? false\n\t\t\t\t\t\t\t\t\t: dropCap,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ParagraphRTLControl\n\t\t\t\t\t\tdirection={ direction }\n\t\t\t\t\t\tsetDirection={ ( newDirection ) =>\n\t\t\t\t\t\t\tsetAttributes( { direction: newDirection } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<InspectorControls group=\"typography\">\n\t\t\t\t<DropCapControl\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t\t<RichText\n\t\t\t\tidentifier=\"content\"\n\t\t\t\ttagName=\"p\"\n\t\t\t\t{ ...blockProps }\n\t\t\t\tvalue={ content }\n\t\t\t\tonChange={ ( newContent ) =>\n\t\t\t\t\tsetAttributes( { content: newContent } )\n\t\t\t\t}\n\t\t\t\tonSplit={ ( value, isOriginal ) => {\n\t\t\t\t\tlet newAttributes;\n\n\t\t\t\t\tif ( isOriginal || value ) {\n\t\t\t\t\t\tnewAttributes = {\n\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\tcontent: value,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst block = createBlock( name, newAttributes );\n\n\t\t\t\t\tif ( isOriginal ) {\n\t\t\t\t\t\tblock.clientId = clientId;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn block;\n\t\t\t\t} }\n\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\tonReplace={ onReplace }\n\t\t\t\tonRemove={ onRemove }\n\t\t\t\taria-label={\n\t\t\t\t\tRichText.isEmpty( content )\n\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t'Empty block; start writing or type forward slash to choose a block'\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: __( 'Block: Paragraph' )\n\t\t\t\t}\n\t\t\t\tdata-empty={ RichText.isEmpty( content ) }\n\t\t\t\tplaceholder={ placeholder || __( 'Type / to choose a block' ) }\n\t\t\t\tdata-custom-placeholder={ placeholder ? true : undefined }\n\t\t\t\t__unstableEmbedURLOnPaste\n\t\t\t\t__unstableAllowPrefixTransformations\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default ParagraphBlock;\n"],"mappings":"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"}